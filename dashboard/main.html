<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>District Dos</title>
    <link rel="stylesheet" href="./frontend/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./frontend/dashboard.js"></script>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-2 d-none d-md-block bg-light sidebar py-4">
            <div class="position-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><a class="nav-link active" href="#"><span class="bi bi-house"></span> Dashboard</a></li>
                    <li class="nav-item mb-2"><a class="nav-link" href="#"><span class="bi bi-calendar"></span> Calendar</a></li>
                    <li class="nav-item mb-2"><a class="nav-link" href="#"><span class="bi bi-gear"></span> Setting</a></li>
                </ul>
            </div>
        </nav>
        <!-- Main Content -->
        <main class="col-md-10 ms-sm-auto px-4">
            <!-- Welcome Panel -->
            <div class="welcome-panel mb-4">
                <span class="emoji">üßë‚Äçüíª</span>
                <div>
                    <h2 class="mb-1">Hello, Admin!</h2>
                    <p class="mb-0">Explore demographic data and activity in your community.</p>
                </div>
            </div>
            <!-- Dashboard Cards -->
            <div class="dashboard-cards mb-4">
                <div class="card-population">
                    <div class="card-title">Total Population</div>
                    <div class="card-value"><?php echo $totalPopulation; ?></div>
                    <div class="card-sub">This month: 30</div>
                </div>
                <div class="card-male">
                    <div class="card-title">Male</div>
                    <div class="card-value"><?php echo $gender['Male']; ?></div>
                </div>
                <div class="card-female card-component">
                    <div class="card-title">Female</div>
                    <div class="card-value"><?php echo $gender['Female']; ?></div>
                </div>
                <div class="card-component">
                    <div class="card-title">Growth Rate</div>
                    <div class="card-value"><?php echo $growthRate; ?></div>
                </div>
            </div>
            <!-- Charts Row -->
            <div class="dashboard-charts tableau-layout mb-4">
                <div class="chart-card">
                    <div class="graph-title">Population Trend</div>
                    <div class="main-graph-area">
                        <canvas id="growthChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="graph-title">Barangay Breakdown</div>
                    <div class="main-graph-area">
                        <canvas id="barangayChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="graph-title">Age Groups</div>
                    <div class="main-graph-area">
                        <canvas id="ageChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="graph-title">Gender Ratio</div>
                    <div class="main-graph-area">
                        <canvas id="genderChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="graph-title">Earnings</div>
                    <div class="main-graph-area">
                        <canvas id="earningsChart"></canvas>
                    </div>
                </div>
            </div>
            <!-- Birthdays -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card-component">
                        <div class="card-title">Today's Birthdays</div>
                        <ul class="mb-0">
                            <?php foreach ($birthdaysToday as $birthday): ?>
                            <li><?php echo $birthday['name'] . ' (' . date('Y-m-d', strtotime($birthday['birthday'])) . ')'; ?></li>
                            <?php endforeach; ?>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card-component">
                        <div class="card-title">Upcoming Birthdays</div>
                        <ul class="mb-0">
                            <?php foreach ($birthdaysUpcoming as $birthday): ?>
                            <li><?php echo $birthday['name'] . ' (' . date('Y-m-d', strtotime($birthday['birthday'])) . ')'; ?></li>
                            <?php endforeach; ?>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Population Table -->
            <div class="main-graph-area mb-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="graph-title">Population Table</div>
                    <div>
                        <form action="#" method="post" enctype="multipart/form-data" class="d-inline">
                            <input type="file" name="importFile" accept=".csv" style="display:none;" id="importFileInput" onchange="alert('Import functionality not implemented in static HTML!');">
                            <button type="button" class="btn btn-success me-2" onclick="document.getElementById('importFileInput').click();">
                                <span class="bi bi-upload"></span> Import CSV
                            </button>
                        </form>
                        <a class="btn btn-primary" href="#" role="button">Add Resident</a>
                    </div>
                </div>
                <table class="table table-striped" id="populationTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Age</th>
                            <th>Gender</th>
                            <th>Address</th>
                            <th>Contact</th>
                            <th>Birthday</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($data as $row): ?>
                        <tr>
                            <td><?php echo $row['name']; ?></td>
                            <td><?php echo $row['age']; ?></td>
                            <td><?php echo ucfirst(strtolower($row['sex'])); ?></td>
                            <td><?php echo $row['address']; ?></td>
                            <td><?php echo $row['contact']; ?></td>
                            <td><?php echo date('Y-m-d', strtotime($row['birthday'])); ?></td>
                            <td>
                                <a class='btn btn-secondary btn-sm' href="#">Edit</a>
                                <a class='btn btn-danger btn-sm' href="#">Delete</a>
                            </td>
                        </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
        </main>
    </div>
</div>

</body>
</html>